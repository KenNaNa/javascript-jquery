<!doctype html>
<html lang="en">
	 <head>
         <meta charset="UTF-8">
         <meta name="Generator" content="EditPlus®">
         <meta name="Author" content="">
	     <meta name="Keywords" content="">
	     <meta name="Description" content="">
         <title>速度版的运动框架-李金文</title>
		 <style type="text/css">
		     *{
			     margin:0;
			     padding:0;
			 }
			 #box{
                position: absolute;
                top: 0;
                left: 0;
                width: 50px;
                height: 100px;
                background: pink;
            }
		 </style>
	 </head>
<body>
<div id="box"></div>
        <script>

            //goudan();

            //box 宽度->500px
            var oBox = document.getElementById("box");

            //兼容
            window.requestAnimationFrame = window.requestAnimationFrame || function (fn) {return setTimeout(fn , 1000/60)};
            window.cancelAnimationFrame = window.cancelAnimationFrame || clearTimeout;

            //box 宽度->500px

            var cssJson = oBox.currentStyle || getComputedStyle(oBox);
            var startW = parseFloat(cssJson.width);//获取初始宽度
            var endW = 500;//目标自己所需要的效果
            var speed = 10; //变化的快买
            var flag = startW > endW;

            if ( flag ){
                speed = -speed;
            }

            (function fn(){
                startW += speed; //初始值迭增，决定速度的快慢
                if ( flag?startW <= endW:startW >= endW ){
                    startW = endW;
                }else{
                    requestAnimationFrame(fn);
                }
                oBox.style.width = startW+'px';//设置属性的新值
            })();

            /*
             if ( startW >= endW ){
                startW = endW;
             }else{
                requestAnimationFrame(fn);
             }
             */

        </script>
</body>
</html>
