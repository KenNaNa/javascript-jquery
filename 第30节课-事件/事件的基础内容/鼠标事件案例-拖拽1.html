<!doctype html>
<html lang="en">
	 <head>
         <meta charset="UTF-8">
         <meta name="Generator" content="EditPlus®">
         <meta name="Author" content="">
	     <meta name="Keywords" content="">
	     <meta name="Description" content="">
         <title>鼠标事件案例-拖拽-李金文</title>
		 <style type="text/css">
		     *{
			     margin:0;
			     padding:0;
			 }
			 #box{
			    position:absolute;
			    width:100px;
				height:100px;
				background:pink;
				cursor:pointer;
			 }
		 </style>
	 </head>
<body>
<div id="box">
   
</div>
<script>
    var oBox = document.getElementById('box');
	var w = 100;
	var h = 100;
	var maxW = (document.documentElement.clientWidth||document.body.clientWidth)-w;
	var maxH = (document.documentElement.clientHeight||document.body.clientHeight)-h;
	document.onmousedown = function(ev){
	    ev = ev||window.event;
		var scX = ev.clientX;//初始的鼠标位置
		var scY = ev.clientY;
		var osL = oBox.offsetLeft;//初始的box的位置
		var osT = oBox.offsetTop;
		document.onmousemove = function(e){
		    e = e||window.event;
			var ncX = e.clientX;//当前的初始值
			var ncY = e.clientY;
			var nscX = ncX - scX;//变化量
			var nscY = ncY - scY;
			var l = nscX + osL;//当前的left值
			var t = nscY + osT;//当前的top值
			if( l>=maxW ){
			   l = maxW;
			}
			if( l<=0 ){
			   l = 0;
			}
			if( t>=maxH ){
			   t = maxH;
			}
			if( t<=0 ){
			   t = 0;
			}
			oBox.style.left = l + 'px';
			oBox.style.top = t + 'px';
		}
	}
	document.onmouseup = function(){
	    document.onmousemove = null;
	}
</script>
</body>
</html>
